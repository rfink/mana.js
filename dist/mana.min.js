!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.mana=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){return this instanceof d?(this.id=null,this.children=[],this.ruleset=null,void(this.value=null)):new d}var e=a("verdict.js"),f=e.parse;b.exports=d,d.prototype.evaluate=function(a){return!this.ruleset||this.ruleset.test(a)},d.prototype.exec=function(a){var b=[];return function c(d){if(d.evaluate(a)){if(d.isLeaf())return void b.push(d);for(var e=0,f=d.children.length;e<f;e++)c(d.children[e])}}(this),b},d.prototype.execFirst=function(a){for(var b=[this],c=null;b.length;)if(c=b.shift(),c.evaluate(a)){if(c.isLeaf())return c;b=b.concat(c.children)}return null},d.prototype.isLeaf=function(){return!this.children.length},d.prototype.forEach=d.prototype.each=function(a){var b=null,c=null;for(a(this),b=0,c=this.children.length;b<c;++b)this.children[b].forEach(a);return this},d.prototype.leaves=function(){var a=[];return this.forEach(function(b){b.isLeaf()&&a.push(b)}),a},d.prototype.parse=d.parse=function(a){var b,c,e;if(!a)throw new Error("JSON object cannot be empty");for(a.children=a.children||[],a.ruleset=a.ruleset||null,b=new d,b.id=a.id,b.value=a.value,a.ruleset&&(b.ruleset=f(a.ruleset)),c=0,e=a.children.length;c<e;++c)b.children.push(d.parse(a.children[c]));return b}},{"verdict.js":5}],2:[function(a,b,c){function d(a){function b(a){for(var b=a||(0,eval)("this"),d=c.length,e=0;e<d;e+=1)b&&(b=b[c[e]]);return b}var c;return a=a.replace(/\[(\d+)\]/g,".$1"),c=a.split("."),arguments.length>1?b(arguments[1]):b}b.exports=d},{}],3:[function(a,b,c){var d=a("weighted"),e=a("version-compare.js");c.exists=function(a){return!!a},c.nexists=function(a){return!a},c.matches=function(a,b){return b="string"==typeof b?new RegExp(b):b,b.test(a)},c.nmatches=function(a,b){return b="string"==typeof b?new RegExp(b):b,!b.test(a)},c.contains=function(a,b){return!!~a.indexOf(b)},c.ncontains=function(a,b){return!~a.indexOf(b)},c.eq=function(a,b){return a==b},c.neq=function(a,b){return a!=b},c.is=function(a,b){return a===b},c.not=function(a,b){return a!==b},c.gt=function(a,b){return a>b},c.gte=function(a,b){return a>=b},c.lt=function(a,b){return a<b},c.lte=function(a,b){return a<=b},c.inRange=function(a,b){return a>=b[0]&&a<=b[1]},c.ninRange=function(a,b){return a<b[0]||a>b[1]},c.divisibleBy=function(a,b){return a%b===0},c.ndivisibleBy=function(a,b){return a%b!==0},c.weight=function(a,b){return d([!0,!1],[b,1-b])},c.nweight=function(a,b){return d([!1,!0],[b,1-b])},c.eqVersion=function(a,b){return!e(a,b)},c.gtVersion=function(a,b){return e(a,b)===-1},c.gteVersion=function(a,b){var c=e(a,b);return 0===c||c===-1},c.ltVersion=function(a,b){return 1===e(a,b)},c.lteVersion=function(a,b){var c=e(a,b);return 0===c||1===c},c.compile=function(a,b){var c=null,d=b.replace(/^([\s]+)/,"").replace(/([\s]+)$/,"").replace(/^(return)/i,"").replace(/(;)$/,"");return(c=new Function("return !!("+d+");"))()}},{"version-compare.js":7,weighted:8}],4:[function(a,b,c){c.any=function(a,b){var c=null,d=null;if(!a)return!1;for(c=0,d=a.length;c<d;++c)if(a[c].test(b))return!0;return!1},c.all=function(a,b){var c=null,d=null;if(!a)return!1;for(c=0,d=a.length;c<d;++c)if(!a[c].test(b))return!1;return!0},c.none=function(a,b){return!c.any.apply(null,arguments)}},{}],5:[function(a,b,c){function d(a,b){return this instanceof d?(this.composite=b||"all",void(this.rules=a||[])):new d(a,b)}function e(a){return function(b,c){return this.rules.push(new h({path:b,comparator:a,value:c})),this}}function f(a){return function(b){var c=Array.prototype.slice.call(arguments);return c[0]instanceof Array&&(c=c[0]),c&&this.add(c),this.composite=a,this}}var g,h=a("./rule"),i=a("./composite"),j=a("./comparison");b.exports=d,d.prototype=new h,d.prototype.constructor=d,d.prototype.test=function(a){var b=i[this.composite];if(!b)throw new Error("Invalid composite or no composite supplied");return b.call(null,this.rules,a)},d.prototype.add=function(a){var b=null,c=null;if(a instanceof Array){for(b=0,c=a.length;b<c;++b)this.add(a[b]);return this}return a instanceof h?this.rules.push(a):a.rules?this.rules.push(new d(a.rules,a.composite)):this.rules.push(new h(a)),this},d.prototype.parse=d.parse=function k(a){var b=null,c=null,e=null;if(!a)throw new Error("JSON cannot be empty");if(!a.rules)return new h(a);for(b=new d,b.composite=a.composite||b.composite,c=0,e=a.rules.length;c<e;++c)b.rules.push(k(a.rules[c]));return b};for(g in i)i.hasOwnProperty(g)&&(d.prototype[g]=f(g));for(g in j)j.hasOwnProperty(g)&&(d.prototype[g]=e(g))},{"./comparison":3,"./composite":4,"./rule":6}],6:[function(a,b,c){function d(a){return this instanceof d?(a=a||{},this.path=a.path||"",this.comparator=a.comparator||"",this.value=a.value||"",void(this.invert=!!a.invert)):new d(a)}var e=a("selectn"),f=a("./comparison");b.exports=d,d.prototype.test=function(a){var b=e(this.path,a)||"",c=f[this.comparator];if(!c)throw new Error("Invalid comparator or comparator not supplied");return!!(c.call(null,b,this.value)^this.invert)}},{"./comparison":3,selectn:2}],7:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d;if(typeof a+typeof b!="stringstring")return!1;for(a=a.split("."),b=b.split("."),d=Math.max(a.length,b.length),c=0;c<d;c++){if(a[c]&&!b[c]&&parseInt(a[c])>0||parseInt(a[c])>parseInt(b[c]))return 1;if(b[c]&&!a[c]&&parseInt(b[c])>0||parseInt(a[c])<parseInt(b[c]))return-1}return 0}},{}],8:[function(a,b,c){b.exports=a("./lib/weighted")},{"./lib/weighted":9}],9:[function(a,b,c){function d(a){function b(a,b){return function(){a.__weighted_total=null,b.apply(a,arguments)}}var c=a.__weighted_total;return null!=c?c:(void 0===c&&["pop","push","shift","unshift","splice"].forEach(function(c){a[c]=b(a,a[c])}),c=a.__weighted_total=a.reduce(function(a,b){return a+b},0))}function e(a,b,c){if("function"!=typeof c.rand&&(c.rand=Math.random),a.length!==b.length)throw new Error("Different number of options & weights.");for(var e=c.total||(c.normal?1:d(b)),f=c.rand()*e,g=0;g<b.length;g++)if(f-=b[g],f<0)return a[g];throw new Error("All weights do not add up to >= 1 as expected.")}function f(a,b){var c=Object.keys(a),d=c.map(function(b){return a[b]});return e(c,d,b)}function g(a,b,c){if("function"==typeof c&&(c={rand:c}),null==c&&(c={}),Array.isArray(a)){if(Array.isArray(b)){if(a.length===b.length)return e(a,b,c);throw new Error("Set and Weights are different sizes.")}throw new Error("Set is an Array, and Weights is not.")}if("object"==typeof a)return f(a,b||c);throw new Error("Set is not an Object, nor is it an Array.")}b.exports=g,b.exports.select=g},{}]},{},[1])(1)});